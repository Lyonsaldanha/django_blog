<!-- templates/post_new.html -->
{% extends "base.html" %}

{% block title %}New Post - Django Blog{% endblock %}

{% block content %}
<div style="max-width: 700px; margin: 0 auto;">
  <!-- Header -->
  <div style="margin-bottom: var(--space-6);">
    <a href="{% url 'home' %}" class="button ghost small">
      ‚Üê Back to Home
    </a>
  </div>

  <div class="card" style="padding: var(--space-8);">
    <h1 style="margin-top: 0; margin-bottom: var(--space-2);">‚ú® Create New Post</h1>
    <p class="text-light" style="margin-bottom: var(--space-8);">
      Share your thoughts with the world. Fill in the details below to create your blog post.
    </p>

    <!-- Display form errors if any -->
    {% if form.errors %}
    <div role="alert" data-variant="danger" style="margin-bottom: var(--space-6);">
      <strong>‚ö†Ô∏è Please fix the following errors:</strong>
      <ul style="margin: var(--space-2) 0 0 var(--space-4); padding: 0;">
        {% for field, errors in form.errors.items %}
          {% for error in errors %}
            <li>{{ field }}: {{ error }}</li>
          {% endfor %}
        {% endfor %}
      </ul>
    </div>
    {% endif %}

    <form method="post" action="{% url 'post_new' %}">
      {% csrf_token %}
      
      {% for field in form %}
      <div data-field style="margin-bottom: var(--space-6);">
        <label for="{{ field.id_for_label }}" style="margin-bottom: var(--space-2);">
          {{ field.label }}
          {% if field.field.required %}
          <span style="color: var(--danger);">*</span>
          {% endif %}
        </label>
        
        {% if field.name == 'body' %}
        <textarea 
          name="{{ field.name }}" 
          id="{{ field.id_for_label }}"
          {% if field.field.required %}required{% endif %}
          placeholder="Write your post content here..."
          style="min-height: 200px;">{{ field.value|default:'' }}</textarea>
        {% else %}
        <input 
          type="text" 
          name="{{ field.name }}" 
          id="{{ field.id_for_label }}"
          value="{{ field.value|default:'' }}"
          {% if field.field.required %}required{% endif %}
          placeholder="Enter {{ field.label|lower }}">
        {% endif %}
        
        {% if field.help_text %}
        <span data-hint>{{ field.help_text }}</span>
        {% endif %}
        
        {% if field.errors %}
        <span class="error">{{ field.errors.0 }}</span>
        {% endif %}
      </div>
      {% endfor %}

      <div class="hstack gap-2" style="justify-content: flex-end; margin-top: var(--space-8); padding-top: var(--space-6); border-top: 1px solid var(--border);">
        <a href="{% url 'home' %}" class="button outline">
          Cancel
        </a>
        <button type="submit" class="button">
          üíæ Save Post
        </button>
      </div>
    </form>
  </div>
</div>
{% endblock content %}